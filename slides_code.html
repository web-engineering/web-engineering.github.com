<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=1024, user-scalable=no">
    <title>Slides for
        Tools to keep your Code Clean in the Web Engineering Textbook
    </title>
    <!-- Required stylesheet -->
    <link rel="stylesheet" media="screen" href="stylesheets/deck.core.css">
    <!-- Extension CSS files go here. Remove or add as needed. -->
    <link rel="stylesheet" media="screen" href="stylesheets/deck.goto.css">
    <link rel="stylesheet" media="screen" href="stylesheets/deck.menu.css">
    <link rel="stylesheet" media="screen" href="stylesheets/deck.navigation.css">
    <link rel="stylesheet" media="screen" href="stylesheets/deck.status.css">
    <!-- Style theme. More available in /themes/style/ or create your own. -->
    <link rel="stylesheet" media="screen" href="stylesheets/web-2.0.css">
    <!-- Transition theme. More available in /themes/transition/ or create your own. -->
    <link rel="stylesheet" media="screen" href="stylesheets/horizontal-slide.css">
    <!-- syntax highlighter -->
    <link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shCore.css" />
    <link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shThemeRailsGuides.css" />    


    <!-- Basic black and white print styles -->
    <link rel="stylesheet" media="print" href="stylesheets/print.css">
    <!-- Required Modernizr file -->
    <script src="javascripts/modernizr.custom.js"></script>
</head>

<body>
    <div class="deck-container">
        <div class='slide'><h2>Tools to keep your Code Clean</h2><p>With this guide will get to know some tools
that will help you produce good code, and keep
the quality up.</p><p>You will get to know tools for Ruby for</p>
<ul>
<li>linting</li>
<li>best practices</li>
<li>security</li>
</ul>

</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-1'>▻</a>
<h3 id="static-code-analysis">1 Static Code Analysis</h3>
<p>Any automatic analysis done on the <strong>source code</strong> of a program
is called <strong>static</strong> analysis.  The simplest form is a check
of coding conventions. This is called "linting". </p>
</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-2'>▻</a>
<h3 id="coding-convention">2 Coding Convention</h3>
<p>A Style Guide or Coding Convention places
restrictions on the way you write your code: it tells
you how deep indentation should be, whether to put
spaces inside brackts, and so on.</p>
<p>You can invest a lot of emotional energy in this, and fight
with your co-workers over the details of formatting.  Or
you can just decide on a style guide to follow, and be done
with the discussions.</p>
<ul>
<li><a href="https://github.com/bbatsov/ruby-style-guide">ruby style guide</a></li>
<li><a href="https://github.com/airbnb/javascript">airbnb style guide</a></li>
<li><a href="https://standardjs.com/">javascript standard stlye</a></li>
<li><a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PHP Standards Recommendations: PSR-2</a></li>
</ul>
</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-3'>▻</a>
<h3 id="linting">3 Linting</h3>
<p>To lint is to check if code follows a style guide.
Linting tools are available for all languages:</p>
<ul>
<li><a href="https://github.com/bbatsov/rubocop">rubocop</a></li>
<li><a href="http://eslint.org/">ES Lint</a></li>
<li><a href="https://github.com/squizlabs/PHP_CodeSniffer">PHP Code Sniffer</a></li>
</ul>
<p>You can incorporate linting into your editor, this
way you will never stray far from the style guide.</p>
<p><img src="/images/rubocop-in-vscode.png" srcset='/images/rubocop-in-vscode.png 1x, /images/rubocop-in-vscode@2x.png 2x' alt="rubocop in vscode"></p>
</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-4'>▻</a>
<h3 id="example-linter-for-ruby-rubocop">4 Example Linter for Ruby: Rubocop</h3>
<p>When you run <code>rubocop</code> it will examine all the files
in the current directory, and in subdirectories.</p>
<p>The rules that rubocop follows are called "cops". The default
rules are <a href="https://github.com/rubocop-hq/rubocop/blob/master/config/default.yml">documented here</a>.</p>
<p>You can configure rubocop by writing a file <code>.rubocop.yml</code> in your
projects root folder.</p>
<p>Run  <code>rubocop -d</code> to find out which rules the code is breaking.
You can disable rules for all files, you can exempt some files from
completely, or you can deactivate a rule just for a few lines of code:</p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
# rubocop:disable Metrics/LineLength, Style/StringLiterals
# [... ugly code ...]
# rubocop:enable Metrics/LineLength, Style/StringLiterals

</pre>
</div>
</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-5'>▻</a>
<h3 id="example-linter-for-javascript-eslint">5 Example Linter for JavaScript: ESLint</h3>
<p>When you run <code>eslint</code> it will examine all the files
in the current directory, and in subdirectories.</p>
<p>The rules that eslint follows are configured
in an <code>.eslintrc.*</code> file or an <code>eslintConfig</code> field in a <code>package.json</code> file.</p>
<p>Especially important are parser options because eslint can be used
on different version of JavaScript and TypeScript. See <a href="https://eslint.org/docs/user-guide/configuring#specifying-parser-options">the documentation</a>.</p>
<p>You can also configure rule just for a few lines of code
by writing comments in your source code. The following example
was taken from <a href="https://hackernoon.com/eslint-configuration-comments-e6f274a16f96">Jeff Lowreys article</a></p>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
const getFinalContext = (context) =&gt; {
        /* eslint-disable-next-line no-unused-vars */
        const { calls, ...finalContext } = context;
        return finalContext;
    }

</pre>
</div>
<p>The above code does a destructuring assignment from a passed-in context parameter. The function is only interested in the rest assignment to finalContext, and “discards” the first assignment, calls. Jeff Lowrey  disables the rule that
would complain about having an unused variable <code>call</code> by using the comment <code>/* eslint-disable-next-line no-unused-vars */</code>. This only applies to the next code line, though, and the rule will remain in effect for the rest of the file.</p>
</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-6'>▻</a>
<h3 id="best-practices">6 Best Practices</h3>
<p>For the framework Rails there exists a collection of "best pracices" - 
hints how to use the framworks.  They are doumented on <a href="https://rails-bestpractices.com/">rails-bestpractices.com</a></p>
<p>There is a command line tool that checks your Rails projects against
these best pracices and can also fix some of the problems:</p>
<ul>
<li><a href="https://github.com/railsbp/rails_best_practices">rails_best_pracices</a></li>
</ul>
</div>
<div class='slide'>
<a class='slide_break' href='code.html#slide-7'>▻</a>
<h3 id="security">7 Security</h3>
<p>Brakeman is a static analysis tool that specializes in security
problems for Ruby on Rails.  Use it on your rails project to find and fix security problems:</p>
<ul>
<li><a href="https://github.com/presidentbeef/brakeman">brakeman</a></li>
</ul>
<p>For JavaScript there are some ESLint rules you can install for
checking for security problems:</p>
<ul>
<li><a href="https://github.com/mozfreddyb/eslint-config-scanjs">eslint-config-scanjs</a></li>
<li>
<a href="https://github.com/nodesecurity/eslint-plugin-security">eslint-plugin-security</a> for node.js</li>
</ul>
</div>
    </div>
    <!-- End slides. -->
    <!-- Begin extension snippets. Add or remove as needed. -->
    <!-- deck.navigation snippet -->
    <div aria-role="navigation">
        <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
        <a href="#" class="deck-next-link" title="Next">&#8594;</a>
    </div>
    <!-- deck.status snippet -->
    <p class="deck-status" aria-role="status">
        <span class="deck-status-current"></span>
        /
        <span class="deck-status-total"></span>
    </p>
    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
        <label for="goto-slide">Go to slide:</label>
        <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
        <datalist id="goto-datalist"></datalist>
        <input type="submit" value="Go">
    </form>
    <!-- End extension snippets. -->
    </div>
    <!-- Required JS files. -->
    <script src="javascripts/jquery.min.js"></script>
    <script src="javascripts/deck.core.js"></script>
    <!-- Extension JS files. Add or remove as needed. -->
    <script src="javascripts/deck.menu.js"></script>
    <script src="javascripts/deck.goto.js"></script>
    <script src="javascripts/deck.status.js"></script>
    <script src="javascripts/deck.navigation.js"></script>
    <script src="javascripts/deck.escape.js"></script>
    <!--  Syntax highlighter -->
    <script src="javascripts/syntaxhighlighter/shCore.js"></script>
    <script src="javascripts/syntaxhighlighter/shBrushRuby.js"></script>
    <script src="javascripts/syntaxhighlighter/shBrushXml.js"></script>
    <script src="javascripts/syntaxhighlighter/shBrushSql.js"></script>
    <script src="javascripts/syntaxhighlighter/shBrushPlain.js"></script>    
    <!-- Initialize the deck. You can put this in an external file if desired. -->
    <script>
    SyntaxHighlighter.all()      
    $(function() {
      $.deck('.slide');
    });

    var $d = $(document);    

    $d.bind('deck.change', function(event, from, to) {
      // console.log('Moving from slide ' + from + ' to ' + to);
    });   
    $d.bind('deck.beforeInit', function() {
      // console.log('Deck.beforeInit. hash is ' + document.location.hash);
    });     
    $d.bind('deck.init', function() {
      // console.log('Deck.init is done. hash was ' + document.location.hash);
    }); 
    </script>
</body>

</html>