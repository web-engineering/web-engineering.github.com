<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Web Engineering Textbook: Ruby </title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

  <link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shCore.css" />
  <link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shThemeRailsGuides.css" />

  <link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />

  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body class="guide">
  <div>
    <a href="http://github.com/bjelline/web-engineering-textbook/"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 10;" src="images/forkme.png" alt="Fork me on GitHub"></a>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">Learn more at the sources: </strong>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="http://git-scm.com/documentation">Git Documentation</a></li>
        <li class="more-info"><a href="http://try.github.com/">Try Git</a></li>
        <li class="more-info"><a href="http://rubyonrails.org/">Ruby on Rails</a></li>
        <li class="more-info"><a href="http://guides.rubyonrails.org/">Rails Guides</a></li>
        <li class="more-info"><a href="http://railsforzombies.org/">Rails for Zombies</a></li>
        <li class="more-info"><a href="http://railscasts.com/">Railscasts</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Web<span>Engineering</span></a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" onclick="guideMenu(); return false;" id="guidesMenu" class="guides-index-item nav-item">Index  &#x25BC;</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>Git</dt>
                <dd><a href="git_branching.html">Branching and Merging</a></dd>
                <dd><a href="git_teamwork.html">Teamwork</a></dd>
                <dt>Ruby on Rails</dt>
                <dd><a href="rails_with_scaffold.html">Rails with Scaffold</a></dd>
                <dd><a href="ruby_commandline.html">Ruby Commandline</a></dd>
                <dd><a href="rails_database_and_model.html">Rails Database and Model</a></dd>
                <dd><a href="rails_view_and_controller.html">Rails View and Controller</a></dd>
                <dd><a href="authentication_from_scratch.html">Authentication from Scratch</a></dd>
                <dd><a href="authentication_with_devise.html">Authentication with Devise</a></dd>
                <dd><a href="asset_pipeline.html">Asset Pipeline</a></dd>
                <dd><a href="testing_and_refactoring.html">Testing and Refactoring</a></dd>
                <dd><a href="deploying_rails.html">Deploying Rails with Capistrano</a></dd>
              </dl>
              <dl class="R">
                <dt>Software Process</dt>
                <dd><a href="good_practices.html">Good Practices</a></dd>
                <dd><a href="agile.html">Agile Methods</a></dd>
                <dd><a href="refactoring_rails.html">Refactoring Rails</a></dd>
                <dt>More Ruby on Rails</dt>
                <dd><a href="rails_advanced_models.html">Advanced Rails Models</a></dd>
                <dd><a href="testing_with_rspec.html">Testing with RSpec</a></dd>
                <dd><a href="advanced_testing.html">Advanced testing</a></dd>
                <dd><a href="internationalization.html">Internationalization (I18n)</a></dd>
                <dd><a href="security.html">Security</a></dd>
                <dd><a href="webserver.html">Webserver</a></dd>
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="https://github.com/bjelline/web-engineering-textbook/">Contribute</a></li>
      </ul>
      </div>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><ol class="chapters">
<li>
<a href="#what-is-ruby">What is Ruby</a>

<ul>
<li><a href="#what-is-ruby-on-rails">What is ruby on rails</a></li>
<li><a href="#why-ruby-questionmark-why-rails-questionmark">Why Ruby? Why Rails ?</a></li>
</ul>
</li>
<li>
<a href="#ruby-basics">Ruby Basics </a>

<ul>
<li><a href="#some-code-conventions">Some code conventions</a></li>
<li><a href="#strings">Strings</a></li>
<li><a href="#boolean-values">Boolean Values</a></li>
<li><a href="#shorthand-for-conditions">shorthand for conditions</a></li>
<li><a href="#boolean-operators">Boolean Operators</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#hashes">Hashes</a></li>
</ul>
</li>
<li>
<a href="#enumerables-and-piping-data">Enumerables and Piping Data</a>

<ul>
<li><a href="#piping-data">"Piping Data"</a></li>
<li><a href="#piping-data-in-ruby">Piping Data in Ruby</a></li>
<li><a href="#some-methods-for-enumerables">some methods for Enumerables</a></li>
<li><a href="#enumerables-and-piping-data-methods-for-enumerables-that-take-a-block">methods for Enumerables that take a block</a></li>
<li><a href="#enumerables-and-piping-data-methods-for-enumerables-that-take-a-block">methods for Enumerables that take a block</a></li>
<li><a href="#methods-for-enumerables-that-take-a-block">methods for Enumerables that take a block</a></li>
<li><a href="#avoid-loops-bang">avoid loops!</a></li>
</ul>
</li>
<li>
<a href="#blocks-etc">Blocks etc.</a>

<ul>
<li><a href="#blocks-etc-my-function-takes-a-block-of-code">My Function takes a Block of Code</a></li>
<li><a href="#blocks-etc-my-function-takes-a-block-of-code">My Function takes a Block of Code</a></li>
</ul>
</li>
<li><a href="#ruby-style">Ruby Style</a></li>
</ol></body></html>

            <dl>
               <dd class="work-in-progress">This whole book is currently a work in progress. While still useful, it may contain incomplete information and even errors. You can help by reviewing them and posting your comments and corrections.</dd>
            </dl>
          </div>

      <h2>Ruby </h2><p>This guide will focus on ruby - the language - alone.</p><p>After finishing this guide you will</p>
<ul>
<li>have an overview of rubys type system</li>
<li>be able to use list processing funktions in ruby</li>
<li>be able to use blocks and <code>yield</code> in ruby.</li>
</ul>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h3 id="what-is-ruby">1 What is Ruby</h3>
<p><img src="images/Ruby_logo.png" alt="Ruby Logo"></p>
<p>Ruby is an open source project.  It was started
in 1996 by Yukihiro 'Matz' Matsumoto. He is still
the "benevolent dictator" who decides on the future of the language.</p>
<p>In a colossal break with tradition he did not
choose a name starting with p for his scripting language
(think perl, python, php) but opted for r instead.</p>
<p>Like python ruby is a modern, thoroughly object oriented scripting language.
Even basic data types are object:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
1.to_s
=&gt; "1"

</pre>
</div>
<p>In this example the number 1 is used as an object, the method <code>to_s</code> is
called on it.  The result is an Object of class String.</p>
<h4 id="what-is-ruby-on-rails">1.1 What is ruby on rails</h4>
<p><img src="images/Ruby_on_Rails_logo.png" alt="Ruby on Rails Logo"></p>
<p>Ruby on Rails is a web framework written in ruby.
It was created by David Heinemeier Hansson ('DHH') starting in 2005.</p>
<p>Rails is famous for the high productivity it gives to developers. It
is often used in startups, where speed of delivery is very important.
Rails moves fast, new versions with major improvement appear about every 18
months.  The rails community values speed of development, DRY code, testing,
version control, ... when you learn rails you also pick up whole culture 
surrounding it.</p>
<h4 id="why-ruby-questionmark-why-rails-questionmark">1.2 Why Ruby? Why Rails ?</h4>
<p>Why should you use Ruby and Rails over other programming languages
and frameworks?  </p>
<ul>
<li>Because you want to be a highly productive web developer?</li>
<li>Because you want to learn from the best?</li>
<li>Because you want try out many different languages and many frameworks?</li>
</ul>
<p>All these answers are equally valid.</p>
<p>Also, we have cool t-shirts:</p>
<p><img src="images/ruby-and-rails-t-shirts.png" alt="Ruby and Rails T-Shirts"></p>
<h3 id="ruby-basics">2 Ruby Basics </h3>
<p>For a hands-on introdcution to ruby got to <a href="http://tryruby.org">try ruby</a>.
Then come back and read on:</p>
<h4 id="some-code-conventions">2.1 Some code conventions</h4>
<p>Identifiers:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
the_variable = SomeClass.new
             # variables are written in snake_case
             # classes in capital CamelCase

a = b.sugar  # a method the returns something
b.sweet?     # a method that returns true or false
b.sugar!     # a method that changes it's object

</pre>
</div>
<p>In ruby the parantheses around arguments are optional.
Leave them off unless your code get's confusing:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
puts("less code")
puts "less code" 

</pre>
</div>
<h2>Data Types</h2>
<p>All of rubys basic data types are Classes.</p>
<ul>
<li>Fixnum, Bignum, Float # are convert automatically to each other</li>
<li>String</li>
<li>true  # TrueClass</li>
<li>false # FalseClass</li>
<li>Symbol</li>
<li>Array</li>
<li>Hash</li>
<li>Object</li>
</ul>
<h4 id="strings">2.2 Strings</h4>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
s = 'just a string of characters'
s = "string with #{the_variable} or even #{a+b/c} a ruby expression embedded"
s = &lt;&lt;-EOM
This is a so called "Here-Document"
it can contain many lines of text
and ends with the identifier EOM (that i chose!)
but only if it's alone on a line all by itselve:
EOM 

</pre>
</div>
<h4 id="boolean-values">2.3 Boolean Values</h4>
<p>In ruby only false and nil are treated as false. This might
be confusing for programmers used to other languages with
more complex rules for truthyness:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
if 0 
  puts '0 is true!' 
end
if "false"
  puts '"false" (the string) is not false'       
end

</pre>
</div>
<h4 id="shorthand-for-conditions">2.4 shorthand for conditions</h4>
<p>the two conditions shown in the last
code block only have one statement inside
the if block.  This can also be written
in another way:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
puts '0 is true!' if 0 
puts '"false" is not false' if "false"

</pre>
</div>
<h4 id="boolean-operators">2.5 Boolean Operators</h4>
<p>When ruby evaluates a boolean operator it
only does as little work as necessary.</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
# the second argument is not evaluated!
a =  true || ...
a = false &amp;&amp; ...

</pre>
</div>
<p>The boolean operators don't just return true or
false, they return the argument last evaluated.
This is often used to set a variable:</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
default_value = "gray"
input_value = nil
a = input_value || default_value

</pre>
</div>
<h4 id="methods">2.6 Methods</h4>
<p>Methods in ruby return the last expression - even
if no explicit <code>return</code> statement is given.</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def f(a,b)
  "x"
end

f(1,42)

</pre>
</div>
<h4 id="hashes">2.7 Hashes</h4>
<p>A Hash is a datastructure similar to an array, but it uses
arbitrary keys of any object type, not an integer index.</p>
<p><img src="images/hash_table.svg" alt="How Hash(tabl)es work"></p>
<ul>
<li>how does it work</li>
<li>complexity of insert</li>
<li><p>complexity of loopup</p></li>
<li><p><a href="http://en.wikipedia.org/wiki/Hash_table">Hashtables in Wikipedia</a></p></li>
</ul>
<h3 id="enumerables-and-piping-data">3 Enumerables and Piping Data</h3>
<h4 id="piping-data">3.1 "Piping Data"</h4>
<div class="code_container">
<pre class="brush: plain; gutter: false; toolbar: false">
# many httpd processes are running. as which user(s) ?
# 
$ ps aux | grep httpd | cut -c1-8 | sort | uniq

</pre>
</div>
<h4 id="piping-data-in-ruby">3.2 Piping Data in Ruby</h4>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
languages = %w[Fortran Ada C C++ Java Scala Haskell]
languages.sort.first(3)

</pre>
</div>
<h4 id="some-methods-for-enumerables">3.3 some methods for Enumerables</h4>
<ul>
<li>sort</li>
<li>first(n)</li>
<li>drop(n)</li>
<li>last(n)</li>
<li>grep(/pattern/)</li>
<li>count</li>
<li>count("only this exact value")</li>
<li>max, min</li>
</ul>
<h4 id="enumerables-and-piping-data-methods-for-enumerables-that-take-a-block">3.4 methods for Enumerables that take a block</h4>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
(1..10).map{ |x| x*2 }.reverse

</pre>
</div>
<h4 id="enumerables-and-piping-data-methods-for-enumerables-that-take-a-block">3.5 methods for Enumerables that take a block</h4>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
(1..10).map do |x| 
  x*2 
end.reverse

</pre>
</div>
<h4 id="methods-for-enumerables-that-take-a-block">3.6 methods for Enumerables that take a block</h4>
<ul>
<li>map {|x| new value computed from x} </li>
<li>select {|x| should x be selected? }</li>
<li>reduce(:+)</li>
<li>reduce{|memo, item| compute new value for memo}</li>
</ul>
<h4 id="avoid-loops-bang">3.7 avoid loops!</h4>
<h3 id="blocks-etc">4 Blocks etc.</h3>
<h4 id="blocks-etc-my-function-takes-a-block-of-code">4.1 My Function takes a Block of Code</h4>
<p>as it's last argument</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def my_function_with_block_arg
  puts "code in the funtion"
  yield
  puts "more code in the function"
end

my_function_with_block_arg { puts "code in the block" }

</pre>
</div>
<h4 id="blocks-etc-my-function-takes-a-block-of-code">4.2 My Function takes a Block of Code</h4>
<p>as it's last argument</p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
def my_function_with_block_arg
  puts "code in the funtion"
  yield
  puts "more code in the function"
end

my_function_with_block_arg do
  puts "code in the block"
  puts "more code in the block"
end

</pre>
</div>
<h3 id="ruby-style">5 Ruby Style</h3>
<p><a href="https://github.com/styleguide/ruby">Githubs Style Guide</a> is good enough
for you!</p>
</body></html>

      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p class="copyright">published under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> in 2012 by <a href="http://brigitte-jellinek.at">Brigitte Jellinek</a>.
      </p><p>If you want to contribute: <a href="https://github.com/bjelline/web-engineering-textbook/fork_select">fork the source on github</a>
        and edit <a href="https://github.com/bjelline/web-engineering-textbook/blob/master/source/ruby_commandline.md">ruby_commandline.md</a>
      </p>
    </div>
  </div>

  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/responsive-tables.js"></script>
  <script type="text/javascript" src="javascripts/guides.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shCore.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushRuby.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushXml.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushSql.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushPlain.js"></script>
  <script type="text/javascript">
    SyntaxHighlighter.all()
    $(guidesIndex.bind);
  </script>
  </body>
</html>
