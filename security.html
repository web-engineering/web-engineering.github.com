<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Web Engineering Textbook: Security</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/style.css" />
  <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

  <link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shCore.css" />
  <link rel="stylesheet" type="text/css" href="stylesheets/syntaxhighlighter/shThemeRailsGuides.css" />

  <link rel="stylesheet" type="text/css" href="stylesheets/fixes.css" />
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" />

  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
</head>
<body class="guide">
  <div>
    <a href="http://github.com/web-engineering/web-engineering-textbook/"><img style="position: fixed; top: 0; right: 0; border: 0; z-index: 10;" src="images/forkme.png" alt="Fork me on GitHub"></a>
  </div>
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">Learn more at the sources: </strong>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="https://git-scm.com/documentation">Git Documentation</a></li>
        <li class="more-info"><a href="https://try.github.io/">Try Git</a></li>
        <li class="more-info"><a href="http://refactoring.com/catalog/">Refactoring Catalog</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="index.html" title="Return to home page">Web<span>Engineering</span></a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="index.html" onclick="guideMenu(); return false;" id="guidesMenu" class="guides-index-item nav-item">Index  &#x25BC;</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr />
              <dl class="L">
                <dt>Workflows</dt>
                <dd><a href="git_basics.html">Git Basics</a></dd>
                <dd><a href="git_branching.html">Branching and Merging</a></dd>
                <dd><a href="git_teamwork.html">Teamwork</a></dd>
                <dd><a href="good_practices.html">Good Practices</a></dd>
                <dd><a href="agile.html">Agile Methods</a></dd>
                <dd><a href="testing_and_refactoring.html">Testing and Refactoring</a></dd>
                <dd><a href="advanced_testing.html">Advanced testing</a></dd>
                <dd><a href="deploying_rails.html">Deploying Rails with Capistrano</a></dd>
              </dl>
              <dl class="R">
                <dt>Web Operations</dt>
                <dd><a href="webserver.html">Webserver</a></dd>
                <dd><a href="security.html">Security</a></dd>
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="https://github.com/bjelline/web-engineering-textbook/">Contribute</a></li>
      </ul>
      </div>
    </div>
  </div>
  <hr class="hide" />

  <div id="feature">
    <div class="wrapper">
                <div id="subCol">
            <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<ol class="chapters">
<li><a href="#example-app">Example App</a></li>
<li><a href="#don-t-display-confidential-data">Don't display confidential data</a></li>
<li><a href="#see-also">See Also</a></li>
</ol>
</body></html>

          </div>

      <h2>Security</h2><p>This guide will give you an introduction
to the security features included in ruby on rails,
how to use them, and how to mess up in spite of all the
help the framework is giving you</p><p>By referring to this guide, you will be able to:</p>
<ul>
<li>Use rails&#39;s security features consciously</li>
<li>Appreciate how hard security is</li>
</ul>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<h3 id="example-app">1 Example App</h3>
<p>This guide comes with an example app, you can find the source on github:
<a href="https://github.com/web-engineering/rails-example-security">rails-example-security</a>.
This app is full of security holes. While reading this guide you should
work on the app and fix those holes one by one.</p>
<h3 id="don-t-display-confidential-data">2 Don't display confidential data</h3>
<p>Rails offers a lot of security features.  But all those clever features
cannot save you from yourself.  In the example app all the passwords
are displayed on "/users". No framework can prevent that!</p>
<p><img src="images/security-password-shown.png" alt=""></p>
<p>Let's use this as an example of how to fix a security problem
once you've found it:  First we write a test for the problem: <code>spec/features/user_spec.rb</code></p>
<div class="code_container">
<pre class="brush: ruby; gutter: false; toolbar: false">
  describe "Users", :type =&gt; :feature do

    describe "are listed publicly" do

      it "shows name and e-mail" do
        u = User.create!({ :name =&gt; 'noob', 
                           :email =&gt; 'foo@bar.com', 
                           :password =&gt; 'secret'})
        visit "/users"
        page.body.should have_text('noob')
        page.body.should have_text('foo@bar.com')
      end

      it "does not show password" do
        u = User.create!({ :name =&gt; 'noob', 
                           :email =&gt; 'foo@bar.com', 
                           :password =&gt; 'secret'})
        visit "/users"
        page.body.should_not have_text('secret')
      end

      # ....
    end
  end

</pre>
</div>
<p>When we run this test it fails, because right now passwords are displayed:</p>
<p><img src="images/security-password-test-fails.png" alt=""></p>
<p>Now we change the view to not display the passwords any more. Running the test again we get success:</p>
<p><img src="images/security-password-test-ok.png" alt=""></p>
<h3 id="see-also">3 See Also</h3>
<p><a href="http://guides.rubyonrails.org/security.html">Rails Guide: Security</a></p>
</body></html>

      </div>
    </div>
  </div>

  <hr class="hide" />
  <div id="footer">
    <div class="wrapper">
      <p class="copyright">published under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/at/deed.de">creative commons by-nc-sa</a> in 2012-2016 by <a href="http://brigitte-jellinek.at">Brigitte Jellinek</a>.
      </p><p>If you want to contribute: <a href="https://github.com/web-engineering/web-engineering-textbook/fork">fork the source on github</a>
        and edit <a href="https://github.com/web-engineering/web-engineering-textbook/blob/master/source/security.md">security.md</a>
      </p>
    </div>
  </div>

  <script type="text/javascript" src="javascripts/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/responsive-tables.js"></script>
  <script type="text/javascript" src="javascripts/guides.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shCore.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushRuby.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushXml.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushSql.js"></script>
  <script type="text/javascript" src="javascripts/syntaxhighlighter/shBrushPlain.js"></script>
  <script type="text/javascript">
    SyntaxHighlighter.all()
    $(guidesIndex.bind);
  </script>
  </body>
</html>
